version: "3"

services:
  openpredict-api:
    container_name: openpredict-api
    build: .
    # Outdated image: docker.pkg.github.com/maastrichtu-ids/translator-openpredict/openpredict-api:latest
    restart: unless-stopped
    ports:
      - 8808:8808
    volumes:
      - /data/openpredict:/data/openpredict
    environment: 
      SPARQL_USERNAME: ${SPARQL_USER}
      SPARQL_PASSWORD: ${SPARQL_PASSWORD}
      SPARQL_ENDPOINT_URL: https://graphdb.dumontierlab.com/repositories/translator-openpredict
      SPARQL_ENDPOINT_UPDATE_URL: https://graphdb.dumontierlab.com/repositories/translator-openpredict/statements

      # Variable for nginx-proxy routing. See https://github.com/nginx-proxy/
      VIRTUAL_HOST: openpredict.semanticscience.org
      LETSENCRYPT_HOST: openpredict.semanticscience.org
      VIRTUAL_PORT: 8808
      # SPARK_MASTER_URL: spark://my-spark-spark-master:7077
    # command: start-api --server-url https://openpredict.semanticscience.org
